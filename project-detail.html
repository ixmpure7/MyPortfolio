<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Project Detail</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      font-family: var(--font-sans);
      padding: 1.5rem 1rem;
      max-width: 900px;
      margin: 0 auto;
      color: var(--color-text);
      background-color: var(--color-gray-100);
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .footer {
      margin-left: calc(-50vw + 50%);
      margin-right: calc(-50vw + 50%);
      margin-bottom: calc(-50vh + 47%); 
      width: 100vw;
    }

    /* Project Carousel Styles */
    .project-carousel {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: 2rem auto;
      overflow: hidden;
      border-radius: 12px;
    }

    .carousel-container {
      display: flex;
      transition: transform 0.5s ease;
    }

    .carousel-slide {
      min-width: 100%;
      position: relative;
    }

    .carousel-slide img {
      width: 100%;
      height: auto;
      max-height: 500px;
      object-fit: contain;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(16, 185, 129, 0.15);
    }

    .carousel-prev, .carousel-next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.5);
      color: white;
      border: none;
      padding: 1rem;
      cursor: pointer;
      border-radius: 50%;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .carousel-prev {
      left: 1rem;
    }

    .carousel-next {
      right: 1rem;
    }

  /* แก้ไขส่วนนี้ */
.carousel-slide::before, 
.carousel-slide::after {
  content: '';
  position: absolute;
  top: 0;
  width: 15%;
  height: 100%;
  z-index: 1;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
  /* เปลี่ยนจาก transform เป็นการซ่อนด้วย opacity อย่างเดียว */
}

.carousel-slide::before {
  left: 0;
  background: linear-gradient(90deg, rgba(0,0,0,0.3) 0%, transparent 100%);
  /* ลบ transform ออก */
}

.carousel-slide::after {
  right: 0;
  background: linear-gradient(270deg, rgba(0,0,0,0.3) 0%, transparent 100%);
  /* ลบ transform ออก */
}

.project-carousel:hover .carousel-slide::before,
.project-carousel:hover .carousel-slide::after {
  opacity: 1;
  /* ไม่ต้องใช้ transform อีกต่อไป */
}

/* เมื่อ hover ที่ carousel */
.project-carousel:hover .carousel-slide::before,
.project-carousel:hover .carousel-slide::after {
  opacity: 1;
}

    /* Project Content Styles */
    .project-content {
      margin: 2rem 0;
    }

    .technologies {
      margin-bottom: 1.8rem;
    }

    .tech-tag {
      display: inline-block;
      background: var(--color-gray-200);
      color: var(--color-primary-dark);
      padding: 0.35rem 0.8rem;
      border-radius: 20px;
      font-size: 0.95rem;
      font-weight: 600;
      margin-right: 0.5rem;
      margin-bottom: 0.4rem;
      box-shadow: 0 2px 6px rgba(16, 185, 129, 0.25);
      user-select: none;
    }

    .links {
      margin-bottom: 2.5rem;
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .links a {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      background-color: var(--color-primary-dark);
      color: var(--color-bg);
      font-weight: 600;
      padding: 0.55rem 1rem;
      border-radius: 8px;
      text-decoration: none;
      box-shadow: 0 3px 8px rgba(16, 185, 129, 0.5);
      transition: background-color 0.3s, box-shadow 0.3s;
      user-select: none;
    }

    .links a:hover {
      background-color: #3b82f6;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.7);
    }

    .links a svg {
      stroke-width: 2.2;
      width: 18px;
      height: 18px;
    }

    .back-btn {
      display: inline-flex;
      margin-top: 2rem;
      text-decoration: none;
      color: var(--color-primary-dark);
      border: 1.8px solid var(--color-primary-dark);
      padding: 0.5rem 1.3rem;
      border-radius: 8px;
      font-weight: 600;
      letter-spacing: 0.03em;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
      user-select: none;
      align-items: center;
      gap: 0.4rem;
      width: fit-content;
    }

    .back-btn:hover {
      background-color: var(--color-primary-dark);
      color: var(--color-bg);
      border-color: var(--color-primary-dark);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .project-carousel {
        max-width: 100%;
      }
      
      .carousel-prev, .carousel-next {
        padding: 0.75rem;
      }
      
      .carousel-slide::before, 
      .carousel-slide::after {
        width: 10%;
      }
      
      .carousel-slide::before {
        left: -10%;
      }
      
      .carousel-slide::after {
        right: -10%;
      }
    }

    @media (max-width: 600px) {
      body {
        padding: 1rem 0.8rem;
      }
      
      h1 {
        font-size: 1.6rem;
      }
      
      .links {
        flex-direction: column;
        gap: 0.8rem;
      }
      
      .links a {
        justify-content: center;
      }
      
      nav {
        justify-content: center;
      }
    }

    .media-content {
  width: 100%;
  height: auto;
  max-height: 500px;
  object-fit: contain;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(16, 185, 129, 0.15);
}

.carousel-slide {
  min-width: 100%;
  position: relative;
  /* กำหนดความสูงคงที่สำหรับคอนเทนเนอร์สไลด์ */
  height: 500px; /* สามารถปรับความสูงตามที่คุณต้องการได้ */
  display: flex; /* ใช้ flexbox เพื่อจัดตำแหน่งเนื้อหา */
  align-items: center; /* จัดกึ่งกลางแนวตั้ง */
  justify-content: center; /* จัดกึ่งกลางแนวนอน */
}

.carousel-slide img,
.carousel-slide video {
  width: 100%;
  height: 100%; /* ทำให้สื่อเติมเต็มคอนเทนเนอร์สไลด์ */
  object-fit: contain; /* ทำให้รูปภาพ/วิดีโอทั้งหมดแสดงผลได้ */
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(16, 185, 129, 0.15);
}

/* สำหรับวีดีโอเฉพาะ */
video.media-content {
  background-color: #000; /* พื้นหลังดำสำหรับส่วนที่ไม่เต็มจอ */
}


/* ปรับปุ่มควบคุมวีดีโอ */
/*
video.media-content::-webkit-media-controls {
  background: rgba(0,0,0,0.5);
}

video.media-content::-webkit-media-controls {
  opacity: 0;
  transition: opacity 0.3s;
}

video.media-content:hover::-webkit-media-controls {
  opacity: 1;
}
*/
  </style>
</head>
<body class="dark">
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <a href="#home" class="logo">
        <i data-lucide="tower-control"></i>
        <span>Yotsaphon<span class="accent">Portfolio</span></span>
      </a>
      <div class="nav-links">
        <a href="index.html#home" class="nav-links"></i> Home</a>
        <a href="index.html#projects" class="nav-links"></i> Projects</a>
        <a href="index.html#skills" class="nav-links"></i> Skills</a>
        <a href="index.html#contact" class="nav-links"></i> Contact</a>
        <button id="theme-toggle" aria-label="Toggle theme">
          <i data-lucide="moon"></i>
        </button>
      </div>
      <button class="mobile-menu-btn" aria-label="Toggle menu">
        <i data-lucide="menu"></i>
      </button>
    </div>
  </nav>

  <!-- Back button ก่อนเนื้อหา -->
  <div class="container" style="margin-top: 5rem;">
    <a href="index.html#projects"
      class="back-btn"
      style="margin-left: -50rem; background-color: transparent; border: 1.8px solid #ef4444; color: #ef4444; transition: background-color 0.3s, color 0.3s, border-color 0.3s;"
      onmouseover="this.style.backgroundColor='#dc2626'; this.style.color='white';"
      onmouseout="this.style.backgroundColor='transparent'; this.style.color='#ef4444';">
      <i data-lucide="arrow-left"></i> Back
    </a>
  </div>

  <!-- Main Content -->
  <main id="project-detail" role="main" aria-live="polite" aria-atomic="true">
    <!-- ข้อมูลโปรเจกต์จะแสดงตรงนี้ -->
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-logo">
          <i data-lucide="tower-control"></i>
          <span>Yotsaphon<span class="accent">Portfolio</span></span>
        </div>
        <div class="footer-social">
          <a href="https://github.com/ixmpure7" aria-label="GitHub"><i data-lucide="github"></i></a>
          <a href="https://www.facebook.com/yotsaphon.sommai/" aria-label="facebook"><i data-lucide="Facebook"></i></a>
          <a href="https://www.instagram.com/ixmpure03._/" aria-label="instagram"><i data-lucide="Instagram"></i></a>
        </div>
        <p class="copyright">&copy; 2024 Ixmpure. All works are copyrighted. Please do not copy without permission.</p>
      </div>
    </div>
  </footer>

  <script>
    // Initialize Lucide icons
    lucide.createIcons();
    
    // Mobile menu toggle
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    const navLinks = document.querySelector('.nav-links');
    mobileMenuBtn.addEventListener('click', () => {
      navLinks.classList.toggle('active');
    });

    // Theme toggle
    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;

    themeToggle.addEventListener('click', () => {
      body.classList.toggle('dark');

      const icon = themeToggle.querySelector('[data-lucide]');
      if (body.classList.contains('dark')) {
        icon.setAttribute('data-lucide', 'sun');
      } else {
        icon.setAttribute('data-lucide', 'moon');
      }
      lucide.createIcons();
    });

    // Project Data with multiple images
    const projects = [
      {
        id: '1',
        title: 'Cardland Conquest',
        description: 'An immersive cyberpunk RPG with dynamic storytelling and advanced AI systems.',
        media: [
          { type: 'video', src: 'videos/36_Cardland_Conquest.mp4' },
          { type: 'image', src: 'images/poster__CardlandConquest.png' },
          { type: 'image', src: 'images/group.jpg' },
        ],
        category: 'unity',
        technologies: ['Unity 3D', 'C#'],
        demo: 'https://takeoffproject.itch.io/cardland-conquest',
        github: 'https://github.com/yourname/cardlandconquest'
      },
      {
        id: '2',
        title: '3D Model Sniper',
        description: 'A space exploration game with procedurally generated planets and lifeforms.',
        images: ['images/Sniper3D.png'],
        category: 'maya',
        technologies: ['Maya']
      },
      {
        id: '3',
        title: '3D Model Fighter jet',
        description: 'A mobile adventure game with innovative touch controls and magic rune system.',
        images: ['images/35-1.png',
          'images/35-2.png',
          'images/35-3.png',
        ],
        category: 'maya',
        technologies: ['Maya']
      },
      {
        id: '4',
        title: 'Football With Me',
        description: 'A VR meditation experience with interactive environments and biofeedback.',
        images: ['images/FootballWithme.png'],
        category: 'unity',
        technologies: ['Unity 2D', 'C#'],
        demo: 'https://physicsforgame-projects.itch.io/football-with-me'
      },
      {
        id: '5',
        title: 'DookDik Defender',
        description: 'A VR meditation experience with interactive environments and biofeedback.',
        images: ['images/Dookdik.png'],
        category: 'unity',
        technologies: ['Unity 2D', 'C#']
      }
    ];

    // Carousel Functionality
    function initCarousel(carousel) {
  const container = carousel.querySelector('.carousel-container');
  const slides = carousel.querySelectorAll('.carousel-slide');
  const prevBtn = carousel.querySelector('.carousel-prev');
  const nextBtn = carousel.querySelector('.carousel-next');

  let currentIndex = 0;
  const slideCount = slides.length;

  function updateCarousel() {
    const offset = -currentIndex * 100;
    container.style.transform = `translateX(${offset}%)`;

    // หยุดวิดีโอทั้งหมด
    carousel.querySelectorAll('video').forEach(video => {
      video.pause();
      video.currentTime = 0; // รีเซ็ตไปที่จุดเริ่มต้น
    });

    // พยายามเล่นวิดีโอปัจจุบัน หากมี
    const currentVideo = slides[currentIndex].querySelector('video');
    if (currentVideo) {
      // ใช้ play() พร้อม catch block สำหรับการจัดการข้อผิดพลาด
      currentVideo.play().catch(error => {
        console.warn("Video autoplay prevented:", error);
        // เลือกที่จะแสดงข้อความให้ผู้ใช้ทราบว่าต้องคลิกเล่น
        // หรือตรวจสอบให้แน่ใจว่าปุ่มควบคุมแสดงอยู่เพื่อให้สามารถเล่นด้วยตนเองได้
      });
    }
  }

  prevBtn.addEventListener('click', () => {
    currentIndex = (currentIndex - 1 + slideCount) % slideCount;
    updateCarousel();
  });

  nextBtn.addEventListener('click', () => {
    currentIndex = (currentIndex + 1) % slideCount;
    updateCarousel();
  });

  // ตั้งค่า carousel เริ่มต้น
  updateCarousel();
}

    // Load Project Detail
    const params = new URLSearchParams(window.location.search);
    const projectId = params.get('project');
    const container = document.getElementById('project-detail');

    const project = projects.find(p => p.id === projectId);

    if (project) {
      container.innerHTML = `
        <h1>${project.title}</h1>
        
         <div class="project-carousel">
    <div class="carousel-container">
      ${project.media.map(item => `
        <div class="carousel-slide">
          ${item.type === 'video' ? `
            <video controls muted poster="${item.poster}" class="media-content">
              <source src="${item.src}" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          ` : `
            <img src="${item.src}" alt="${project.title}" class="media-content">
          `}
        </div>
      `).join('')}
    </div>
    <button class="carousel-prev"><i data-lucide="chevron-left"></i></button>
    <button class="carousel-next"><i data-lucide="chevron-right"></i></button>
  </div>
        
        <div class="project-content">
          <p>${project.description}</p>
          <div class="technologies" aria-label="Technologies used">
            ${project.technologies.map(t => `<span class="tech-tag">${t}</span>`).join('')}
          </div>
          <div class="links">
            ${project.demo ? `<a href="${project.demo}" target="_blank" rel="noopener noreferrer" aria-label="Demo of ${project.title}">
              <i data-lucide="monitor"></i> Demo
            </a>` : ''}
            ${project.github ? `<a href="${project.github}" target="_blank" rel="noopener noreferrer" aria-label="GitHub repository of ${project.title}">
              <i data-lucide="github"></i> GitHub
            </a>` : ''}
          </div>
        </div>
      `;
      
      // เรียกใช้ Lucide icons และ Carousel
      lucide.createIcons();
      const carousel = document.querySelector('.project-carousel');
      if (carousel) initCarousel(carousel);
    } else {
      container.innerHTML = `
        <p>Project not found. Please go back and try again.</p>
      `;
    }
  </script>
</body>
</html>